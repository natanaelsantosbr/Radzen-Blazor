@page "/product-search"
@using MyRadzenBlazor.Client.Pages.Products
@inject NotificationService NotificationService
@inject DialogService DialogService

<PageTitle>Products</PageTitle>
@code {
    private string searchTerm;

    private ProductService productService;

    protected override void OnInitialized()
    {
        productService = new ProductService(NotificationService, DialogService, StateHasChanged);
    }
}

<RadzenCard>
    <RadzenRow>
        <RadzenColumn Size="12" SizeMD="4">
            <RadzenTextBox Placeholder="Search..." @bind-Value="searchTerm" Style="width: 100%;" />
        </RadzenColumn>
        <RadzenColumn Size="12" SizeMD="2">
            <RadzenButton Text="Search" Icon="search" Click="@(args => productService.Search(searchTerm))" Style="width: 100%;" />
        </RadzenColumn>
        <RadzenColumn Size="12" SizeMD="2">
            <RadzenButton Text="Create" Icon="add" Click="@(args => productService.CreateProduct())" Style="width: 100%;" />
        </RadzenColumn>
    </RadzenRow>
    <RadzenGrid Data="@productService.FilteredProducts" TItem="ProductRequest" Style="margin-top: 1rem;">
        <Columns>
            <RadzenGridColumn TItem="ProductRequest" Property="Id" Title="ID" />
            <RadzenGridColumn TItem="ProductRequest" Property="Name" Title="Name" />
            <RadzenGridColumn TItem="ProductRequest" Property="Category" Title="Category" />
            <RadzenGridColumn TItem="ProductRequest" Property="Price" Title="Price" />
            <RadzenGridColumn TItem="ProductRequest" Title="Actions">
                <Template Context="product">
                    <RadzenButton Text="Edit" Icon="edit" Click="@(args => productService.EditProduct(product))" Style="margin-right: 0.5rem;" />
                    <RadzenButton Text="Delete" Icon="delete" Click="@(args => productService.ConfirmDelete(product))" ButtonStyle="ButtonStyle.Danger" />
                </Template>
            </RadzenGridColumn>
        </Columns>
    </RadzenGrid>
</RadzenCard>
